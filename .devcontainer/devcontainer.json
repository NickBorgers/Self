// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/jekyll
{
	"name": "Jekyll",
	"build": {
		"dockerfile": "Dockerfile"
	},

	// Mount gh CLI config for authentication
	"mounts": [
		"source=${localEnv:HOME}/.config/gh,target=/home/vscode/.config/gh,type=bind"
	],

	// Set git safe directory config; there has to be a better way to do this
	"postStartCommand": "git config --global --add safe.directory ${containerWorkspaceFolder}",

	// Startup the server
	"postAttachCommand": "nohup bash -c 'bundle exec jekyll serve &'",

	"customizations": {
		"vscode": {
		  "extensions": [
		  ],
		  "settings": {
			"remote.portsAttributes": {
			  "4000": {
				"label": "Jekyll Server",
				"onAutoForward": "openBrowser"
			  }
			}
		  }
		}
	  }
}
